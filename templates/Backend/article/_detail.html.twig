{# templates/Backend/article/_detail.html.twig #}
{% extends 'base.html.twig' %}

{% block specificStylesheets %}{{ encore_entry_link_tags('detail') }}{% endblock %}

{% block body %}
<h1>Iced Tears</h1>
<article class="detail">
    <h2 class="title">{{ article.title }}</h2>
    <p class="author">Author: {{ article.user.nickname }}</p>
    <p class="date">Published on: {{ article.createAt|date('j/m/Y') }}</p>
    <div class="categories">
        <h3>Categories:</h3>
        <div>
            {% for category in article.categories %}
                <p class="category_title">{{ category.title }}</p>
            {% endfor %}
            <div class="content card-text">
                {{ article.content|raw }}
            </div>
        </div>
    </div>
    {% if is_granted('IS_AUTHENTICATED_FULLY') %}
    <div class="card-buttons">
        <a href="{{ path('admin.article.edit', {id: article.id}) }}" class="btn-modify">Edit</a>
        <form method="POST" action="{{ path('admin.article.delete', {'id': article.id}) }}"
              onsubmit="return confirm('Are you sure you want to delete this article? This action cannot be undone.')">
            <input type="hidden" name="token" value="{{ csrf_token('delete' ~ article.id) }}">
            <button class="btn-delete">Delete</button>
        </form>
    </div>
    {% endif %}
</article>

<section class="comments">
    <h2>Comments</h2>
    {% for comment in article.comments %}
        <div class="comment">
            <h3>{{ comment.title }}</h3>
            <p>{{ comment.content }}</p>
            <p>By {{ comment.user.nickname }} on {{ comment.createdAt|date('j/m/Y H:i') }}</p>
        </div>
    {% else %}
        <p>No comments yet. Be the first to comment!</p>
    {% endfor %}
</section>

{% if is_granted('IS_AUTHENTICATED_FULLY') %}
<section class="add-comment">
    <h2>Add a Comment</h2>
    {{ form_start(commentForm) }}
    {{ form_row(commentForm.title) }}
    {{ form_row(commentForm.content) }}

    <button class="btn">Submit</button>
    {{ form_end(commentForm) }}
</section>
{% else %}
<p>You must be logged in to add a comment.</p>
{% endif %}
{% endblock %}
 